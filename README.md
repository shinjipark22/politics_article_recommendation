# ğŸ“° ë„¤ì´ë²„ ì •ì¹˜ ë‰´ìŠ¤ ìë™ ìˆ˜ì§‘ê¸° (Naver Politics News Crawler)

Apache Airflowë¥¼ ì‚¬ìš©í•˜ì—¬ ë„¤ì´ë²„ ë‰´ìŠ¤ 'ì •ì¹˜' ì„¹ì…˜ì˜ ê¸°ì‚¬ë“¤ì„ ë§¤ì¼ ìë™ìœ¼ë¡œ ìˆ˜ì§‘í•˜ê³ , ë¶„ì„ ê°€ëŠ¥í•œ ë°ì´í„°(CSV)ë¡œ ì €ì¥í•˜ëŠ” ë°ì´í„° íŒŒì´í”„ë¼ì¸ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.
ì¶”í›„ ê·¸ë˜í”„ ê¸°ë°˜ ë‰´ìŠ¤ ì¶”ì²œ ì‹œìŠ¤í…œ í™•ì¥ì„ ìœ„í•´ í•µì‹¬ ë¡œì§ì´ ëª¨ë“ˆí™”(`src`)ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

## ğŸ“Œ ì£¼ìš” ê¸°ëŠ¥ (Key Features)

* **ìë™í™”ëœ íŒŒì´í”„ë¼ì¸**: Airflow DAGë¥¼ í†µí•´ ë§¤ì¼ ìì •(`@daily`)ì— ìë™ìœ¼ë¡œ í¬ë¡¤ë§ì´ ìˆ˜í–‰ë©ë‹ˆë‹¤.
* **ìƒì„¸ ë°ì´í„° ìˆ˜ì§‘**: ë‹¨ìˆœ ì œëª©/ë§í¬ë¿ë§Œ ì•„ë‹ˆë¼ **ë³¸ë¬¸(Content), ê¸°ìëª…, ì–¸ë¡ ì‚¬, ê¸°ì‚¬ ì‘ì„±/ìˆ˜ì • ì‹œê°„, ë‰´ìŠ¤ ID** ë“± ìƒì„¸ ì •ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.
* **ë°ì´í„° ì •ì œ**: ë‰´ìŠ¤ ë³¸ë¬¸ ë‚´ì˜ ë¶ˆí•„ìš”í•œ HTML íƒœê·¸, ê´‘ê³  ìŠ¤í¬ë¦½íŠ¸, ê³µë°± ë“±ì„ ì œê±°í•˜ì—¬ ë¶„ì„í•˜ê¸° ì¢‹ì€ í˜•íƒœë¡œ ê°€ê³µí•©ë‹ˆë‹¤.
* **ëª¨ë“ˆí™”ëœ êµ¬ì¡°**: ìŠ¤ì¼€ì¤„ë§(`dags`)ê³¼ í•µì‹¬ ë¡œì§(`src`)ì„ ë¶„ë¦¬í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì„±ê³¼ í™•ì¥ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.
* **ê³¼ê±° ë°ì´í„° ìˆ˜ì§‘ (Backfill)**: `catchup=True` ì„¤ì •ì„ í†µí•´ ì„¤ì •ëœ ì‹œì‘ ë‚ ì§œë¶€í„° í˜„ì¬ê¹Œì§€ ëˆ„ë½ëœ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ìˆ˜ì§‘í•©ë‹ˆë‹¤.
* **CSV ì €ì¥**: ìˆ˜ì§‘ëœ ë°ì´í„°ëŠ” ë‚ ì§œë³„ë¡œ `data/` í´ë”ì— ì €ì¥ë˜ë©°, ì—‘ì…€ ê¹¨ì§ ë°©ì§€(`utf-8-sig`) ì²˜ë¦¬ê°€ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡° (Project Structure)

```bash
politics_article_recommendation_project/
â”œâ”€â”€ dags/
â”‚   â””â”€â”€ politics_news_dag.py  # Airflow DAG ì •ì˜ (ìŠ¤ì¼€ì¤„ë§ ë‹´ë‹¹)
â”œâ”€â”€ src/                      # [Core] í•µì‹¬ ë¡œì§ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ news_crawler.py       # ë„¤ì´ë²„ ë‰´ìŠ¤ ìƒì„¸ í¬ë¡¤ë§ ë¡œì§
â”‚   â”œâ”€â”€ preprocessor.py       # í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬ ë° ì •ì œ ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ graph/                # (ì˜ˆì •) ê·¸ë˜í”„ ì„ë² ë”© ë° ëª¨ë¸ë§ í´ë”
â”œâ”€â”€ data/                     # ìˆ˜ì§‘ëœ CSV íŒŒì¼ì´ ì €ì¥ë˜ëŠ” ê³³ (ìë™ ìƒì„±)
â”œâ”€â”€ requirements.txt          # ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ëª©ë¡
â”œâ”€â”€ .gitignore                # Git ì œì™¸ ì„¤ì •
â””â”€â”€ README.md                 # í”„ë¡œì íŠ¸ ì„¤ëª…ì„œ
```

## ğŸ› ï¸ ì„¤ì¹˜ ë° ì‹¤í–‰ ë°©ë²• (Installation & Usage)

### 1. í™˜ê²½ ì„¤ì •
ì´ í”„ë¡œì íŠ¸ëŠ” **Python 3.12** ë° **Airflow 2.10.2** í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.

```bash
# 1. ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python -m venv airflow_env
source airflow_env/bin/activate

# 2. í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜ (Airflow ë²„ì „ ì œì•½ì¡°ê±´ í¬í•¨)
# ì£¼ì˜: Python 3.12 í˜¸í™˜ì„±ì„ ìœ„í•´ constraints íŒŒì¼ì„ ë°˜ë“œì‹œ í•¨ê»˜ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
pip install -r requirements.txt --constraint "https://raw.githubusercontent.com/apache/airflow/constraints-2.10.2/constraints-3.12.txt"
```

### 2. Airflow ì‹¤í–‰
í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œì—ì„œ Airflowë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```bash
# 1. í˜„ì¬ í´ë”ë¥¼ Airflow í™ˆìœ¼ë¡œ ì„¤ì • (í•„ìˆ˜)
export AIRFLOW_HOME=$(pwd)

# 2. Airflow ì‹¤í–‰ (Webserver, Scheduler, Database ë™ì‹œ ì‹¤í–‰)
airflow standalone
```

### 3. DAG í™œì„±í™” ë° ë°ì´í„° í™•ì¸
1.  **ì›¹ ì ‘ì†**: ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:8080` ì ‘ì†
2.  **ë¡œê·¸ì¸**: í„°ë¯¸ë„ ë¡œê·¸ì— ì¶œë ¥ëœ `admin` / `password` í™•ì¸ (ë˜ëŠ” `standalone_admin_password.txt` íŒŒì¼ í™•ì¸)
3.  **DAG ì¼œê¸°**: **`politics_news_daily`** DAGë¥¼ ì°¾ì•„ ì¢Œì¸¡ì˜ **Toggle ìŠ¤ìœ„ì¹˜**ë¥¼ `ON`ìœ¼ë¡œ ë³€ê²½
4.  **ê²°ê³¼ í™•ì¸**: `data/` í´ë”ì— `naver_politics_YYYYMMDD.csv` íŒŒì¼ì´ ìƒì„±ë˜ëŠ”ì§€ í™•ì¸

## ğŸ“Š ìˆ˜ì§‘ ë°ì´í„° ëª…ì„¸ (Data Schema)

ìˆ˜ì§‘ëœ CSV íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì€ ì»¬ëŸ¼ì„ í¬í•¨í•©ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | ì„¤ëª… | ì˜ˆì‹œ |
| :--- | :--- | :--- |
| **news_id** | ë‰´ìŠ¤ ê³ ìœ  ID (oid-aid ë˜ëŠ” path ê¸°ë°˜) | `001-0012345678` |
| **ì‘ì„±ì¼ì‹œ** | ê¸°ì‚¬ ì‘ì„± ì‹œê°„ | `2026-01-26 10:30:01` |
| **ìˆ˜ì •ì¼ì‹œ** | ê¸°ì‚¬ ìˆ˜ì • ì‹œê°„ (ì—†ìœ¼ë©´ ë¹ˆì¹¸) | `2026-01-26 11:00:00` |
| **ì–¸ë¡ ì‚¬** | ë‰´ìŠ¤ë¥¼ ë°œí–‰í•œ ì–¸ë¡ ì‚¬ | `ì—°í•©ë‰´ìŠ¤` |
| **ê¸°ìëª…** | ê¸°ì‚¬ë¥¼ ì‘ì„±í•œ ê¸°ì | `í™ê¸¸ë™ ê¸°ì` |
| **ì œëª©** | ë‰´ìŠ¤ ê¸°ì‚¬ ì œëª© | `ì •ì¹˜ ê´€ë ¨ ì£¼ìš” ë‰´ìŠ¤ ì œëª©...` |
| **ë³¸ë¬¸** | ê¸°ì‚¬ ë‚´ìš© (ì „ì²˜ë¦¬ ì™„ë£Œ) | `(ì„œìš¸=ì—°í•©ë‰´ìŠ¤) ...` |
| **ì´ë¯¸ì§€URL** | ê¸°ì‚¬ ëŒ€í‘œ ì´ë¯¸ì§€ ì£¼ì†Œ | `https://imgnews...` |
| **ì›ë¬¸ë§í¬** | ì–¸ë¡ ì‚¬ ì›ë¬¸ í˜ì´ì§€ ë§í¬ | `http://...` |
| **ë„¤ì´ë²„ë§í¬** | ë„¤ì´ë²„ ë‰´ìŠ¤ í˜ì´ì§€ ë§í¬ | `https://n.news.naver.com...` |

## âš™ï¸ ì„¤ì • ì •ë³´ (Configuration)

* **ìˆ˜ì§‘ ëŒ€ìƒ**: ë„¤ì´ë²„ ë‰´ìŠ¤ > ì •ì¹˜(Politics) ì„¹ì…˜ (`sid1=100`)
* **ì‹œì‘ ë‚ ì§œ (`start_date`)**: 2026ë…„ 1ì›” 26ì¼
    * *ë³€ê²½ ë°©ë²•: `dags/politics_news_dag.py` ë‚´ `default_args` ìˆ˜ì •*
* **ì €ì¥ ê²½ë¡œ**: `./data/`

## ğŸ‘¨â€ğŸ’» ì‘ì„±ì (Author)

* **Shinji** 